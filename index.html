<!DOCTYPE html>
<!-- ChatBot by Moses - Frenzy Model 1.1 (with Supabase Auth & Chat History Sidebar) -->
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moses Chatbot | Frenzy Model</title>
    <meta name="description" content="Frenzy Model 1.1 - Advanced AI Chatbot with Chat History">
    
    <!-- Preload videos -->
    <link rel="preload" href="videos/desktop-video.mp4" as="video" type="video/mp4">
    <link rel="preload" href="videos/light-video.mp4" as="video" type="video/mp4">
    
    <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@32,400,0,0" />
    
    <!-- Main Styles -->
    <link rel="stylesheet" href="style.css" />
    
    <!-- Web App Manifest (Commented out for local development to avoid CORS) -->
    <!-- <link rel="manifest" href="manifest.json"> -->
    
    <!-- Theme Color for Mobile -->
    <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#FFFFFF" media="(prefers-color-scheme: light)">
    
    <!-- Preconnect to external domains for better performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://bhemodjjglfoqmnqhpxs.supabase.co">
  </head>
  <body>
    <!-- AUTH OVERLAY (Login/Register) -->
    <div id="auth-overlay" class="auth-overlay">
      <div class="auth-card">
        <div class="auth-header">
          <h1 class="auth-title">ğ“œğ“¸ğ“¼ğ“®ğ“¼ ğ“’ğ“±ğ“ªğ“½ğ“«ğ“¸ğ“½</h1>
          <p class="auth-subtitle">Frenzy Model 1.1</p>
        </div>
        
        <div class="auth-tabs">
          <button id="tab-login" class="auth-tab active">
            <span class="material-symbols-rounded">login</span>
            Login
          </button>
          <button id="tab-register" class="auth-tab">
            <span class="material-symbols-rounded">person_add</span>
            Register
          </button>
        </div>

        <!-- Login Form -->
        <form id="login-form" class="auth-form">
          <div class="form-group">
            <label for="maid-id-login">
              <span class="material-symbols-rounded">email</span>
              Email Address
            </label>
            <input 
              id="maid-id-login" 
              type="email" 
              placeholder="name@example.com" 
              required 
              autocomplete="email"
            />
          </div>
          
          <div class="form-group">
            <label for="password-login">
              <span class="material-symbols-rounded">lock</span>
              Password
            </label>
            <input 
              id="password-login" 
              type="password" 
              placeholder="Enter your password" 
              required 
              minlength="6"
              autocomplete="current-password"
            />
          </div>
          
          <div class="auth-actions">
            <button id="login-btn" type="submit" class="btn primary">
              <span class="material-symbols-rounded">login</span>
              Sign In
            </button>
          </div>
          <p class="auth-note">Enter your email and password to access Frenzy.</p>
        </form>

        <!-- Register Form -->
        <form id="register-form" class="auth-form hidden">
          <div class="form-group">
            <label for="maid-id-register">
              <span class="material-symbols-rounded">email</span>
              Email Address
            </label>
            <input 
              id="maid-id-register" 
              type="email" 
              placeholder="name@example.com" 
              required 
              autocomplete="email"
            />
          </div>
          
          <div class="form-group">
            <label for="password-register">
              <span class="material-symbols-rounded">lock</span>
              Password
            </label>
            <input 
              id="password-register" 
              type="password" 
              placeholder="Min. 6 characters" 
              required 
              minlength="6"
              autocomplete="new-password"
            />
          </div>
          
          <div class="auth-actions">
            <button id="register-btn" type="submit" class="btn primary">
              <span class="material-symbols-rounded">person_add</span>
              Create Account
            </button>
          </div>
          <p class="auth-note">Create a new account to start chatting with Frenzy.</p>
        </form>

        <div id="auth-feedback" class="auth-feedback" aria-live="polite"></div>
        
        <div class="auth-footer">
          <p>Â© ğ–¢ğ—ˆğ—‰ğ—’ğ—‹ğ—‚ğ—€ğ—ğ— @ğ–¨ğ—Œğ—Œğ–ºğ–¼ ğ–¬ğ—ˆğ—Œğ–¾ğ—Œ</p>
        </div>
      </div>
    </div>

    <!-- CHAT HISTORY SIDEBAR -->
    <div id="chat-history-sidebar" class="chat-history-sidebar hidden">
      <div class="sidebar-header">
        <button id="new-chat-btn" class="new-chat-btn">
          <span class="material-symbols-rounded">add</span>
          New chat
        </button>
        <button id="close-sidebar-btn" class="close-sidebar-btn" aria-label="Close sidebar">
          <span class="material-symbols-rounded">close</span>
        </button>
      </div>
      <div class="sidebar-content">
        <div id="chat-sessions-list" class="chat-sessions-list">
          <!-- Chat sessions will be dynamically loaded here -->
          <div class="no-chats-message">
            <p>No chat history yet</p>
            <p style="font-size: 12px; margin-top: 8px;">Start a new conversation!</p>
          </div>
        </div>
      </div>
    </div>

    <!-- BACKGROUND VIDEO CONTAINER -->
    <div class="video-container">
      <video id="dark-video" autoplay muted loop playsinline>
        <source src="videos/desktop-video.mp4" type="video/mp4" />
        Your browser does not support HTML5 video.
      </video>
      <video id="light-video" autoplay muted loop playsinline style="display: none;">
        <source src="videos/light-video.mp4" type="video/mp4" />
        Your browser does not support HTML5 video.
      </video>
    </div>

    <!-- MAIN APP CONTAINER (Hidden until authenticated) -->
    <div class="container hidden" id="app-container">
      <!-- APP HEADER -->
      <header class="app-header">
        <button id="menu-toggle-btn" class="menu-toggle-btn" aria-label="Toggle sidebar">
          <span class="material-symbols-rounded">menu</span>
        </button>
        <h1 class="heading">ğ“œğ“¸ğ“¼ğ“®ğ“¼ ğ“’ğ“±ğ“ªğ“½ğ“«ğ“¸ğ“½</h1>
        <h4 class="sub-heading">ğ™·ğš˜ğš  ğšŒğšŠğš— ğ™¸ ğš‘ğšğš•ğš™ ğš¢ğš˜ğš ğšğš˜ğšğšŠğš¢?</h4>
      </header>

      <!-- SUGGESTION CARDS -->
      <ul class="suggestions">
        <li class="suggestions-item" role="button" tabindex="0">
          <p class="text">ğ™³ğšğšœğš’ğšğš— ğšŠ ğš‘ğš˜ğš–ğš ğš˜ğšğšğš’ğšŒğš ğšœğšğšğšğš™ ğšğš˜ğš› ğš›ğšğš–ğš˜ğšğš ğš ğš˜ğš›ğš” ğšğš—ğšğšğš› â‚¹500.</p>
          <span class="icon material-symbols-rounded">draw</span>
        </li>
        <li class="suggestions-item" role="button" tabindex="0">
          <p class="text">ğ™·ğš˜ğš  ğšŒğšŠğš— ğ™¸ ğš•ğšğšŸğšğš• ğšğš™ ğš–ğš¢ ğš ğšğš‹ ğšğšğšŸğšğš•ğš˜ğš™ğš–ğšğš—ğš ğšğš¡ğš™ğšğš›ğšğš’ğšœğš ğš’ğš— 2025?</p>
          <span class="icon material-symbols-rounded">lightbulb</span>
        </li>
        <li class="suggestions-item" role="button" tabindex="0">
          <p class="text">ğš†ğš‘ğš˜ ğš‹ğšğš’ğš•ğš ğš¢ğš˜ğš?</p>
          <span class="icon material-symbols-rounded">explore</span>
        </li>
        <li class="suggestions-item" role="button" tabindex="0">
          <p class="text">ğ™²ğš›ğšğšŠğšğš ğšŠ ğšğšğšŠğšŒğš ğ™¹ğš‚ ğšŒğš˜ğš–ğš™ğš˜ğš—ğšğš—ğš ğšğš˜ğš› ğšğš‘ğš ğšœğš’ğš–ğš™ğš•ğš ğšğš˜ğšğš˜ ğš•ğš’ğšœğš ğšŠğš™ğš™.</p>
          <span class="icon material-symbols-rounded">code_blocks</span>
        </li>
      </ul>

      <!-- CHATS CONTAINER -->
      <div class="chats-container">
        <!-- Chat messages will be dynamically inserted here -->
      </div>

      <!-- PROMPT INPUT AREA -->
      <div class="prompt-container">
        <div class="prompt-wrapper">
          <form action="#" class="prompt-form">
            <input 
              type="text" 
              placeholder="Ask Frenzy" 
              class="prompt-input" 
              required 
              aria-label="Type your message"
            />
            <div class="prompt-actions">
              <!-- FILE UPLOAD WRAPPER -->
              <div class="file-upload-wrapper">
                <img src="#" class="file-preview" alt="File preview" />
                <input 
                  id="file-input" 
                  type="file" 
                  accept="image/*, .pdf, .txt, .csv" 
                  hidden 
                  aria-label="Upload file"
                />
                <button type="button" class="file-icon material-symbols-rounded" aria-label="File icon">description</button>
                <button id="cancel-file-btn" type="button" class="material-symbols-rounded" aria-label="Cancel file">close</button>
                <button id="add-file-btn" type="button" class="material-symbols-rounded" aria-label="Add file">attach_file</button>
              </div>

              <!-- ACTION BUTTONS -->
              <button id="stop-response-btn" type="button" class="material-symbols-rounded" aria-label="Stop response">stop_circle</button>
              <button id="send-prompt-btn" class="material-symbols-rounded" aria-label="Send message">arrow_upward</button>
            </div>
          </form>

          <!-- UTILITY BUTTONS -->
          <button id="theme-toggle-btn" class="material-symbols-rounded" aria-label="Toggle theme" title="Toggle theme">light_mode</button>
          <button id="delete-chats-btn" class="material-symbols-rounded" aria-label="Delete chat" title="Delete current chat">delete</button>
          <button id="logout-btn" class="material-symbols-rounded" title="Logout" aria-label="Logout">logout</button>
        </div>
        
        <!-- DISCLAIMER TEXT -->
        <p class="disclaimer-text">ğ–¥ğ—‹ğ–¾ğ—‡ğ—“ğ—’ ğ–¼ğ–ºğ—‡ ğ—†ğ–ºğ—„ğ–¾ ğ—†ğ—‚ğ—Œğ—ğ–ºğ—„ğ–¾ğ—Œ, ğ—Œğ—ˆ ğ–½ğ—ˆğ—ğ–»ğ—…ğ–¾-ğ–¼ğ—ğ–¾ğ–¼ğ—„ ğ—‚ğ—.</p>
        <p class="disclaimer-text">Â© ğ–¢ğ—ˆğ—‰ğ—’ğ—‹ğ—‚ğ—€ğ—ğ— @ğ–¨ğ—Œğ—Œğ–ºğ–¼ ğ–¬ğ—ˆğ—Œğ–¾ğ—Œ. ğ–²ğ—ˆ ğ–¢ğ—ˆğ—‡ğ—ğ–ºğ–¼ğ— ğ–®ğ—ğ—‡ğ–¾ğ—‹.</p>
      </div>
    </div>
    
    <!-- SUPABASE CLIENT LIBRARY -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
    
    <!-- MAIN APPLICATION SCRIPT -->
    <script src="script.js"></script>
    
    <!-- Optional: Service Worker for PWA features (uncomment when deploying to server) -->
    <!--
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => console.log('SW registered'))
          .catch(error => console.log('SW registration failed'));
      }
    </script>
    -->
  </body>
</html>
